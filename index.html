<!DOCTYPE html>
<html>
    <head>
        <title>Battle of the Arpeegees</title>
        <meta charset="UTF-8">
        <style>
            #scroll-overlay {
                position: fixed;
                pointer-events: none;
                overflow-y: scroll;
                width: 20px;
                top: 0;
                left: calc(100% - 20px);
                right: 0;
                bottom: 0;
                z-index: 2;
                background-color: #0d5e45;
            }
            #scroll-overlay::after {
                content: '';
                display: block;
                height: 4022px;
            }

            #cover-overlay {
                position: fixed;
                pointer-events: none;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 2;
                background-color: #0d5e45;
            }

            #game {
                z-index: 1;
            }
        </style>
        <script>
            function delay(msec) {
                return new Promise(resolve => setTimeout(resolve, msec))
            }

            window.onload = function() {
                const overlay = document.getElementById("scroll-overlay");

                function scroller(event){
                    switch(event.deltaMode){
                        case 0: 		//DOM_DELTA_PIXEL		Chrome
                        overlay.scrollTop+=event.deltaY
                        overlay.scrollLeft+=event.deltaX
                        break;
                        case 1: 		//DOM_DELTA_LINE		Firefox
                        overlay.scrollTop+=15*event.deltaY
                        overlay.scrollLeft+=15*event.deltaX
                        break;
                        case 2: 		//DOM_DELTA_PAGE
                        overlay.scrollTop+=0.03*event.deltaY
                        overlay.scrollLeft+=0.03*event.deltaX
                        break;
                    }
                    event.stopPropagation();
                    event.preventDefault()
                }

                
                var main = document.getElementById("main")
                main.addEventListener('mousemove', (event) => {
                    if (event.clientX > window.innerWidth - 20) {
                        overlay.style.pointerEvents = "all";
                    } else {
                        overlay.style.pointerEvents = "none";
                    }
                })

                document.onwheel = scroller;
            }
        </script>
    </head>
    <body>
        <div id="main">
            <div id="game">
                <canvas id="canvas">
                </canvas>
                <script src="index.js"></script>
                <script>
                    var engine = new Engine({"args":[],"canvasResizePolicy":2,"executable":"index","experimentalVK":false,"fileSizes":{"index.pck":34011056,"index.wasm":13788612},"focusCanvas":false,"gdnativeLibs":[]});
                    engine.startGame().then(() => {
                        const overlay = document.getElementById("scroll-overlay")
                        const coverOverlay = document.getElementById("cover-overlay")

                        overlay.style.backgroundColor = "transparent";
                        coverOverlay.style.backgroundColor = "transparent";
                        console.log("GAME loaded!!!")
                    })
                </script>
            </div>
            <div id="cover-overlay">
            </div>
            <div id="scroll-overlay">
            </div>
        </div>
    </body>
</html>
